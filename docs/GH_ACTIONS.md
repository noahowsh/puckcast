# GitHub Actions Overview

This repo uses several GitHub Actions workflows for predictions, data refresh, validation, posting, and deploy. Below is a quick reference to what runs, when, and what it updates.

## Active Workflows

1) **scheduled-data-refresh.yml** (Granular refresh)
   - Schedule: 10:00 UTC (5 AM ET) and 22:00 UTC (5 PM ET).
   - What it does: based on time/flags, can refresh predictions (`predict_full.py`), standings, goalie pulse, model insights; writes to `web/src/data/*.json`; rebases before push.
   - Concurrency: `scheduled-data-refresh`.

2) **fetch-results.yml** (Results + backtesting)
   - Schedule: 08:00 UTC (4 AM ET).
   - What it does: fetches final scores for recent games, updates `data/archive/predictions_*.json` with results, writes `data/archive/results_tracker.csv` and `web/src/data/backtestingReport.json` (creates placeholder if none).
   - Rebase before push to avoid conflicts.

3) **model-retraining.yml** (If enabled)
   - Purpose: Retrain models (not always scheduled; check file for triggers).
   - Artifacts: Model checkpoints / reports (depends on script configuration).

4) **monitoring-alerts.yml**
   - Purpose: Monitoring hooks/alerts (check file for specifics).

5) **tests.yml**
   - Runs `pytest` (with coverage) on pushes/PRs.

6) **twitter-daily.yml**
   - Schedule (UTC): 13:00 (morning slate), 19:30 (team highlight), 22:30 (results recap), 02:30 (tomorrow tease).
   - Requires `web/src/data/todaysPredictions.json` to exist (generated by refresh); does not regenerate predictions.
   - Uses post types: `morning_slate`, `team_highlight`, `results_recap`, `tomorrow_tease`.
   - Concurrency: `twitter-daily`.
   - Secrets: TWITTER_API_KEY/SECRET, TWITTER_ACCESS_TOKEN/SECRET (optional BEARER).

7) **twitter-weekly-posts.yml**
   - Schedule: 15:00 UTC daily (team_highlight); 19:00 UTC Wed/Fri (results_recap).
   - Post types aligned with daily flow to avoid unsupported options.

8) **vercel-deploy.yml**
   - Purpose: Deploy site to Vercel on push (check file for trigger/branch).

9) **data-validation.yml** (if present/enabled)
   - Purpose: Validate data files (schemas) on push/cron.

## Archived/Removed

- `daily-predictions.yml` (removed to avoid double-running predictions; use `scheduled-data-refresh.yml` instead).
- Legacy X workflows superseded by `twitter-daily.yml` and `twitter-weekly-posts.yml`.

## Notes

- Most data workflows now rebase before push to avoid “fetch first” conflicts when main moves between runs.
- Predictions refresh: The canonical morning refresh is `scheduled-data-refresh.yml` (10:00 UTC). X posting relies on that payload.
- X posting formats and schedules are documented in `docs/X_POSTING.md`.

